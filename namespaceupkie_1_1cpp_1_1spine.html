<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>upkie: upkie::cpp::spine Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">upkie<span id="projectnumber">&#160;9.0.1</span>
   </div>
   <div id="projectbrief">Open-source wheeled biped robots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceupkie_1_1cpp_1_1spine.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">upkie::cpp::spine Namespace Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Inter-process communication protocol with the spine.  
<a href="namespaceupkie_1_1cpp_1_1spine.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classupkie_1_1cpp_1_1spine_1_1AgentInterface.html">AgentInterface</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory map to shared memory.  <a href="classupkie_1_1cpp_1_1spine_1_1AgentInterface.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classupkie_1_1cpp_1_1spine_1_1Spine.html">Spine</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop transmitting actions to the actuation and observations to the agent.  <a href="classupkie_1_1cpp_1_1spine_1_1Spine.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classupkie_1_1cpp_1_1spine_1_1StateMachine.html">StateMachine</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classupkie_1_1cpp_1_1spine_1_1Spine.html" title="Loop transmitting actions to the actuation and observations to the agent.">Spine</a> state machine.  <a href="classupkie_1_1cpp_1_1spine_1_1StateMachine.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:acce48d7e5cfa6b01bd3ad20460c2707b"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceupkie_1_1cpp_1_1spine_acce48d7e5cfa6b01bd3ad20460c2707b.html#acce48d7e5cfa6b01bd3ad20460c2707b">Request</a> : uint32_t { <br />
&#160;&#160;<a class="el" href="namespaceupkie_1_1cpp_1_1spine_acce48d7e5cfa6b01bd3ad20460c2707b.html#acce48d7e5cfa6b01bd3ad20460c2707ba35c3ace1970663a16e5c65baa5941b13">kNone</a> = 0
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_acce48d7e5cfa6b01bd3ad20460c2707b.html#acce48d7e5cfa6b01bd3ad20460c2707baf399eb8fcbf5333a780a3321ca9fefa4">kAction</a> = 1
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_acce48d7e5cfa6b01bd3ad20460c2707b.html#acce48d7e5cfa6b01bd3ad20460c2707ba127f8e8149d57253ad94c9d2c752113d">kStart</a> = 2
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_acce48d7e5cfa6b01bd3ad20460c2707b.html#acce48d7e5cfa6b01bd3ad20460c2707ba97bebae73e3334ef0c946c5df81e440b">kStop</a> = 3
, <br />
&#160;&#160;<a class="el" href="namespaceupkie_1_1cpp_1_1spine_acce48d7e5cfa6b01bd3ad20460c2707b.html#acce48d7e5cfa6b01bd3ad20460c2707bae3587c730cc1aa530fa4ddc9c4204e97">kError</a> = 4
<br />
 }</td></tr>
<tr class="memdesc:acce48d7e5cfa6b01bd3ad20460c2707b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request flag used for shared-memory inter-process communication.  <a href="namespaceupkie_1_1cpp_1_1spine_acce48d7e5cfa6b01bd3ad20460c2707b.html#acce48d7e5cfa6b01bd3ad20460c2707b">More...</a><br /></td></tr>
<tr class="separator:acce48d7e5cfa6b01bd3ad20460c2707b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3acffa9769923821644340ca73f23ac8"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8">State</a> : uint32_t { <br />
&#160;&#160;<a class="el" href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8aa233cf6eb64d27b8feba46dd6cb086fe">kSendStops</a> = 0
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8ac372b1b54561a3ca533a61adafccfc8b">kReset</a> = 1
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8af5137a026a4b2f3b1c8a21cfc60dd14b">kIdle</a> = 2
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8a91bcd78a299b9747fbffc0cf1c1ae144">kStep</a> = 3
, <br />
&#160;&#160;<a class="el" href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8ae033f7151cb68a6eba0551ad2df506eb">kShutdown</a> = 4
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8a274424d4b2847f3476c20fc98440c961">kOver</a> = 5
<br />
 }</td></tr>
<tr class="memdesc:a3acffa9769923821644340ca73f23ac8"><td class="mdescLeft">&#160;</td><td class="mdescRight">States of the state machine.  <a href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8">More...</a><br /></td></tr>
<tr class="separator:a3acffa9769923821644340ca73f23ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad36876c1d7943f2535be4b78b977844b"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceupkie_1_1cpp_1_1spine_ad36876c1d7943f2535be4b78b977844b.html#ad36876c1d7943f2535be4b78b977844b">Event</a> : uint32_t { <a class="el" href="namespaceupkie_1_1cpp_1_1spine_ad36876c1d7943f2535be4b78b977844b.html#ad36876c1d7943f2535be4b78b977844ba6271e28ff352965b1a52163c2c9c2e2b">kCycleBeginning</a> = 0
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_ad36876c1d7943f2535be4b78b977844b.html#ad36876c1d7943f2535be4b78b977844ba9a0848af36001f2871702e16c321aa16">kCycleEnd</a> = 1
, <a class="el" href="namespaceupkie_1_1cpp_1_1spine_ad36876c1d7943f2535be4b78b977844b.html#ad36876c1d7943f2535be4b78b977844ba5226558f5ccca12b5009c9e2f97d50ae">kInterrupt</a> = 2
 }</td></tr>
<tr class="memdesc:ad36876c1d7943f2535be4b78b977844b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Events that may trigger transitions between states.  <a href="namespaceupkie_1_1cpp_1_1spine_ad36876c1d7943f2535be4b78b977844b.html#ad36876c1d7943f2535be4b78b977844b">More...</a><br /></td></tr>
<tr class="separator:ad36876c1d7943f2535be4b78b977844b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a11514490311b13444827f0a9c70c7817"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceupkie_1_1cpp_1_1spine_a11514490311b13444827f0a9c70c7817.html#a11514490311b13444827f0a9c70c7817">allocate_file</a> (int file_descriptor, int bytes)</td></tr>
<tr class="memdesc:a11514490311b13444827f0a9c70c7817"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate file with some error handling.  <a href="namespaceupkie_1_1cpp_1_1spine_a11514490311b13444827f0a9c70c7817.html#a11514490311b13444827f0a9c70c7817">More...</a><br /></td></tr>
<tr class="separator:a11514490311b13444827f0a9c70c7817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c430a00db3e849eb6e4edf04a31d6e3"><td class="memItemLeft" align="right" valign="top">constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceupkie_1_1cpp_1_1spine_a6c430a00db3e849eb6e4edf04a31d6e3.html#a6c430a00db3e849eb6e4edf04a31d6e3">state_name</a> (const <a class="el" href="namespaceupkie_1_1cpp_1_1spine_a3acffa9769923821644340ca73f23ac8.html#a3acffa9769923821644340ca73f23ac8">State</a> &amp;state) noexcept</td></tr>
<tr class="memdesc:a6c430a00db3e849eb6e4edf04a31d6e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of a state.  <a href="namespaceupkie_1_1cpp_1_1spine_a6c430a00db3e849eb6e4edf04a31d6e3.html#a6c430a00db3e849eb6e4edf04a31d6e3">More...</a><br /></td></tr>
<tr class="separator:a6c430a00db3e849eb6e4edf04a31d6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afec55ad2bb6ce56f8f4fb62701ea36ad"><td class="memItemLeft" align="right" valign="top"><a id="afec55ad2bb6ce56f8f4fb62701ea36ad" name="afec55ad2bb6ce56f8f4fb62701ea36ad"></a>
constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><b>kMebibytes</b> = 1 &lt;&lt; 20</td></tr>
<tr class="memdesc:afec55ad2bb6ce56f8f4fb62701ea36ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bits in one mebibyte. <br /></td></tr>
<tr class="separator:afec55ad2bb6ce56f8f4fb62701ea36ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c17c3c7fd9566a2415d95a8dac5ba51"><td class="memItemLeft" align="right" valign="top"><a id="a6c17c3c7fd9566a2415d95a8dac5ba51" name="a6c17c3c7fd9566a2415d95a8dac5ba51"></a>
constexpr unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>kNbStopCycles</b> = 5</td></tr>
<tr class="memdesc:a6c17c3c7fd9566a2415d95a8dac5ba51"><td class="mdescLeft">&#160;</td><td class="mdescRight">When sending stop cycles, send at least that many. <br /></td></tr>
<tr class="separator:a6c17c3c7fd9566a2415d95a8dac5ba51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Inter-process communication protocol with the spine. </p>
<p >Main control loop between agents and actuators.</p>
<p >Design notes: one alternative was a proper FSM with a clear distinction between states (what the spine is doing) and transitions (agent requests, spine replies, etc.). This could have allowed more granularity, such as the spine doing nothing (instead of sending stops) when it is idle, however at the cost of more complexity. We choose to go for the simpler (riskier) version where both agent and spine directly manipulate the agenda. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceupkie.html">upkie</a></li><li class="navelem"><a class="el" href="namespaceupkie_1_1cpp.html">cpp</a></li><li class="navelem"><a class="el" href="namespaceupkie_1_1cpp_1_1spine.html">spine</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
